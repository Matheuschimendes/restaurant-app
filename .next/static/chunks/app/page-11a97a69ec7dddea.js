(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5448:(e,a,s)=>{Promise.resolve().then(s.bind(s,8152))},8152:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>o});var t=s(5155),l=s(2115);let o=()=>{let[e,a]=(0,l.useState)(""),[s,o]=(0,l.useState)([]),[i,r]=(0,l.useState)([]),[n,d]=(0,l.useState)("espeto");(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("/pages/api/produto/[id]");if(!e.ok)throw Error("Erro ao carregar produtos");let a=await e.json();r(a)}catch(e){console.error("Erro ao buscar produtos:",e)}})()},[]);let c=e=>{o(a=>[...a,e])},m=()=>s.reduce((e,a)=>e+a.preco,0).toFixed(2),x=async()=>{if(!e||0===s.length){alert("Por favor, selecione a mesa e adicione itens ao pedido!");return}let t={mesa:e,itens:s,total:m()};try{let s=await fetch("/pages/api/pedido",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){let e=await s.json();throw Error(e.message||"Erro ao finalizar pedido.")}alert("Pedido finalizado para a mesa ".concat(e,". Total: R$ ").concat(m())),a(""),o([])}catch(e){console.error("Erro ao finalizar pedido:",e),alert("Erro ao finalizar pedido. Tente novamente.")}};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 p-4",children:[(0,t.jsxs)("div",{className:"mt-8 max-w-md mx-auto",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Selecione a Mesa"}),(0,t.jsxs)("select",{value:e,onChange:e=>a(e.target.value),className:"w-full p-3 border rounded-lg focus:ring focus:ring-blue-300",children:[(0,t.jsx)("option",{value:"",children:"Selecione a mesa"}),["1","2","3","4","5"].map(e=>(0,t.jsxs)("option",{value:e,children:["Mesa ",e]},e))]})]}),(0,t.jsx)("div",{className:"mt-8 max-w-md mx-auto overflow-x-auto flex space-x-4 p-3",children:["espeto","acompanhamento","bebidas","sobremesa"].map(e=>(0,t.jsx)("button",{onClick:()=>d(e),className:"px-6 py-2 rounded-full font-semibold ".concat(n===e?"bg-blue-500 text-white":"bg-gray-200 text-gray-800 hover:bg-blue-500 hover:text-white"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,t.jsxs)("div",{className:"mt-4 max-w-2xl mx-auto",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Menu"}),i.filter(e=>e.tipo===n).map(e=>(0,t.jsx)("div",{className:"bg-white p-4 rounded-lg mb-4 shadow-md",children:(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:e.nomeProduto}),(0,t.jsx)("p",{className:"text-sm",children:e.descricao})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("span",{className:"text-xl font-bold",children:["R$ ",e.preco.toFixed(2)]}),(0,t.jsx)("button",{onClick:()=>c(e),className:"ml-4 bg-blue-500 text-white px-4 py-2 rounded-lg",children:"Adicionar"})]})]})},e.id))]}),(0,t.jsxs)("div",{className:"mt-8 max-w-md mx-auto",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Seu Pedido"}),s.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("ul",{children:s.map((e,a)=>(0,t.jsxs)("li",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:e.nomeProduto}),(0,t.jsxs)("span",{children:["R$ ",e.preco.toFixed(2)]})]},a))}),(0,t.jsxs)("div",{className:"mt-4 flex justify-between",children:[(0,t.jsx)("span",{children:"Total:"}),(0,t.jsxs)("span",{children:["R$ ",m()]})]}),(0,t.jsx)("button",{onClick:x,className:"w-full mt-4 bg-green-500 text-white py-3 rounded-lg",children:"Finalizar Pedido"})]}):(0,t.jsx)("p",{children:"Nenhum item no pedido."})]})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[441,517,358],()=>a(5448)),_N_E=e.O()}]);