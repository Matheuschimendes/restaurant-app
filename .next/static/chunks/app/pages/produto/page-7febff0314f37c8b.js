(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[215],{4483:(e,t,a)=>{Promise.resolve().then(a.bind(a,9637))},9637:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var o=a(5155),r=a(2115),s=a(6046);let l=()=>{let e=(0,s.useRouter)(),[t,a]=(0,r.useState)([]),[l,d]=(0,r.useState)(""),[i,c]=(0,r.useState)(0),[n,u]=(0,r.useState)("comida"),[x,h]=(0,r.useState)(""),[m,p]=(0,r.useState)(null),[g,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/pages/api/produto/[id]/");if(!e.ok)throw Error("Erro ao carregar produtos");let t=await e.json();a(t)}catch(e){console.error("Erro ao buscar produtos:",e)}})()},[]);let f=async e=>{if(e.preventDefault(),!l||i<=0||isNaN(i)){alert("Por favor, preencha todos os campos corretamente.");return}let t={nomeProduto:l,preco:i,tipo:n,descricao:x};try{let e=m?await fetch("/pages/api/produto/[id]".concat(m.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,id:m.id})}):await fetch("/pages/api/produto/[id]",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(e.ok){alert(m?"Produto atualizado com sucesso!":"Produto cadastrado com sucesso!");let t=await e.json();a(e=>m?e.map(e=>e.id===m.id?t:e):[...e,t]),N(),b(!1)}else alert("Erro ao cadastrar/atualizar produto.")}catch(e){console.error("Erro ao cadastrar/atualizar produto:",e),alert("Erro ao cadastrar/atualizar produto.")}},j=async e=>{try{(await fetch("/pages/api/produto/".concat(e),{method:"DELETE"})).ok?(alert("Produto exclu\xeddo com sucesso!"),a(t.filter(t=>t.id!==e))):alert("Erro ao excluir produto.")}catch(e){console.error("Erro ao excluir produto:",e),alert("Erro ao excluir produto.")}},y=e=>{p(e),d(e.nomeProduto),c(e.preco),u(e.tipo),h(e.descricao||""),b(!0)},N=()=>{p(null),d(""),c(0),u("comida"),h("")};return(0,o.jsx)("div",{className:"min-h-screen bg-gray-50 py-6 px-4 font-sans",children:(0,o.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,o.jsx)("h1",{className:"text-4xl font-semibold text-gray-800 mb-8 text-center",children:"Cadastro e Edi\xe7\xe3o de Produtos"}),(0,o.jsxs)("div",{className:"flex justify-between mb-6",children:[(0,o.jsx)("button",{onClick:()=>e.push("/pages/dashboard"),className:"bg-blue-600 text-white hover:bg-blue-700 rounded-lg px-6 py-3  shadow-md transform transition-all duration-300 hover:scale-105",children:"Voltar para o Dashboard"}),(0,o.jsx)("button",{onClick:()=>b(!0),className:"bg-green-600 text-white hover:bg-green-700 rounded-lg px-6 py-3 shadow-md transform transition-all duration-300 hover:scale-105",children:"Adicionar Produto"})]}),g&&(0,o.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-50 flex justify-center items-center z-50",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-8 w-96",children:[(0,o.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:m?"Editar Produto":"Cadastrar Novo Produto"}),(0,o.jsxs)("form",{onSubmit:f,className:"space-y-6",children:[(0,o.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"nomeProduto",className:"block text-sm font-medium text-gray-700",children:"Nome"}),(0,o.jsx)("input",{id:"nomeProduto",type:"text",value:l,onChange:e=>d(e.target.value),className:"w-full p-4 border rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"precoProduto",className:"block text-sm font-medium text-gray-700",children:"Pre\xe7o"}),(0,o.jsx)("input",{id:"precoProduto",type:"number",value:i,onChange:e=>c(parseFloat(e.target.value)),className:"w-full p-4 border rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"tipoProduto",className:"block text-sm font-medium text-gray-700",children:"Tipo"}),(0,o.jsxs)("select",{id:"tipoProduto",value:n,onChange:e=>u(e.target.value),className:"w-full p-4 border rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,o.jsx)("option",{value:"comida",children:"Comida"}),(0,o.jsx)("option",{value:"sobremesa",children:"Sobremesa"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"descricaoProduto",className:"block text-sm font-medium text-gray-700",children:"Descri\xe7\xe3o"}),(0,o.jsx)("textarea",{id:"descricaoProduto",value:x,onChange:e=>h(e.target.value),className:"w-full p-4 border rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]})]}),(0,o.jsx)("button",{type:"submit",className:"w-full bg-green-500 text-white py-3 rounded-lg shadow-md hover:bg-green-600 transition-all duration-300",children:m?"Atualizar Produto":"Cadastrar Produto"}),(0,o.jsx)("button",{type:"button",onClick:()=>b(!1),className:"w-full bg-gray-500 text-white py-3 rounded-lg shadow-md mt-4 hover:bg-gray-600 transition-all duration-300",children:"Cancelar"})]})]})}),(0,o.jsxs)("div",{className:"mt-8",children:[(0,o.jsx)("h2",{className:"text-3xl font-semibold text-gray-800 mb-4",children:"Produtos Cadastrados"}),(0,o.jsxs)("table",{className:"min-w-full table-auto bg-white shadow-lg rounded-lg overflow-hidden",children:[(0,o.jsx)("thead",{className:"bg-gray-100 text-gray-600",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-6 py-3 text-left",children:"Nome"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left",children:"Pre\xe7o"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left",children:"Tipo"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left",children:"Descri\xe7\xe3o"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left",children:"A\xe7\xf5es"})]})}),(0,o.jsx)("tbody",{children:t.map(e=>(0,o.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,o.jsx)("td",{className:"px-6 py-3",children:e.nomeProduto}),(0,o.jsxs)("td",{className:"px-6 py-3",children:["R$",e.preco.toFixed(2)]}),(0,o.jsx)("td",{className:"px-6 py-3 capitalize",children:e.tipo}),(0,o.jsx)("td",{className:"px-6 py-3",children:e.descricao||"-"}),(0,o.jsxs)("td",{className:"px-6 py-3 space-x-4",children:[(0,o.jsx)("button",{onClick:()=>y(e),className:"text-blue-500 hover:text-blue-700 transition-all duration-200",children:"Editar"}),(0,o.jsx)("button",{onClick:()=>j(e.id),className:"text-red-500 hover:text-red-700 transition-all duration-200",children:"Excluir"})]})]},e.id))})]})]})]})})}},6046:(e,t,a)=>{"use strict";var o=a(6658);a.o(o,"useRouter")&&a.d(t,{useRouter:function(){return o.useRouter}})}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(4483)),_N_E=e.O()}]);