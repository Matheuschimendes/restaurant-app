{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/matheuschimendes/restaurant-app/app/pages/produto/page.tsx"],"sourcesContent":["\n\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Image from \"next/image\";\n\ntype Produto = {\n  id: number;\n  nomeProduto: string;\n  preco: number;\n  tipo: \"espeto\" | \"sobremesa\" | \"acompanhamento\";\n  descricao?: string;\n  imagemUrl?: string;\n};\n\nconst ProdutosPage = () => {\n  const router = useRouter();\n  const [produtos, setProdutos] = useState<Produto[]>([]);\n  const [nomeProduto, setNomeProduto] = useState(\"\");\n  const [precoProduto, setPrecoProduto] = useState(0);\n  const [tipoProduto, setTipoProduto] = useState<\"espeto\" | \"sobremesa\" | \"acompanhamento\">(\"espeto\");\n  const [descricaoProduto, setDescricaoProduto] = useState(\"\");\n  const [imagemProduto, setImagemProduto] = useState<File | null>(null);\n  const [produtoEditando, setProdutoEditando] = useState<Produto | null>(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n\n  useEffect(() => {\n    const fetchProdutos = async () => {\n      try {\n        const response = await fetch(\"/pages/api/produto/[id]\");\n        if (!response.ok) throw new Error(\"Erro ao carregar produtos\");\n        const data: Produto[] = await response.json();\n        setProdutos(data);\n      } catch (error) {\n        console.error(\"Erro ao buscar produtos:\", error);\n      }\n    };\n    fetchProdutos();\n  }, []);\n\n  const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files[0]) {\n      setImagemProduto(e.target.files[0]);\n    }\n  };\n\n  const handleCadastroProduto = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!nomeProduto || precoProduto <= 0 || isNaN(precoProduto)) {\n      alert(\"Por favor, preencha todos os campos corretamente.\");\n      return;\n    }\n\n    const novoProduto = {\n      nomeProduto,\n      preco: precoProduto,\n      tipo: tipoProduto,\n      descricao: descricaoProduto,\n      imagemUrl: imagemProduto ? URL.createObjectURL(imagemProduto) : undefined,\n    };\n\n    try {\n      const response = produtoEditando\n        ? await fetch(`/pages/api/produto/${produtoEditando.id}`, {\n            method: \"PUT\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({ ...novoProduto, id: produtoEditando.id }),\n          })\n        : await fetch(\"/pages/api/produto/[id]\", {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify(novoProduto),\n          });\n\n      if (response.ok) {\n        alert(produtoEditando ? \"Produto atualizado com sucesso!\" : \"Produto cadastrado com sucesso!\");\n        const produtoCadastrado = await response.json();\n        setProdutos((prevProdutos) =>\n          produtoEditando\n            ? prevProdutos.map((prod) =>\n                prod.id === produtoEditando.id ? produtoCadastrado : prod\n              )\n            : [...prevProdutos, produtoCadastrado]\n        );\n        resetForm();\n        setIsModalOpen(false);\n      } else {\n        alert(\"Erro ao cadastrar/atualizar produto.\");\n      }\n    } catch (error) {\n      console.error(\"Erro ao cadastrar/atualizar produto:\", error);\n      alert(\"Erro ao cadastrar/atualizar produto.\");\n    }\n  };\n\n  const handleDeleteProduto = async (id: number) => {\n    try {\n      const response = await fetch(`/pages/api/produto/${id}`, {\n        method: \"DELETE\",\n      });\n\n      if (response.ok) {\n        alert(\"Produto excluído com sucesso!\");\n        setProdutos(produtos.filter((produto) => produto.id !== id));\n      } else {\n        alert(\"Erro ao excluir produto.\");\n      }\n    } catch (error) {\n      console.error(\"Erro ao excluir produto:\", error);\n      alert(\"Erro ao excluir produto.\");\n    }\n  };\n\n  const handleEditProduto = (produto: Produto) => {\n    setProdutoEditando(produto);\n    setNomeProduto(produto.nomeProduto);\n    setPrecoProduto(produto.preco);\n    setTipoProduto(produto.tipo);\n    setDescricaoProduto(produto.descricao || \"\");\n    setImagemProduto(null);\n    setIsModalOpen(true);\n  };\n\n  const resetForm = () => {\n    setProdutoEditando(null);\n    setNomeProduto(\"\");\n    setPrecoProduto(0);\n    setTipoProduto(\"espeto\");\n    setDescricaoProduto(\"\");\n    setImagemProduto(null);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-r from-gray-100 to-gray-200 p-6\">\n      <div className=\"max-w-6xl mx-auto bg-white rounded-lg shadow-lg p-6\">\n        <h1 className=\"text-3xl font-semibold text-center mb-6\">Gestão de Produtos</h1>\n        <div className=\"flex flex-col sm:flex-row justify-between gap-4 mb-6\">\n          <button\n            onClick={() => router.push(\"/pages/dashboard\")}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded-lg shadow hover:bg-blue-600 w-full sm:w-auto\"\n          >\n            Voltar ao Dashboard\n          </button>\n          <button\n            onClick={() => setIsModalOpen(true)}\n            className=\"bg-green-500 text-white px-4 py-2 rounded-lg shadow hover:bg-green-600 w-full sm:w-auto\"\n          >\n            Adicionar Produto\n          </button>\n        </div>\n\n        {isModalOpen && (\n          <div className=\"fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center z-50\">\n            <div className=\"bg-white rounded-lg shadow-lg p-6 w-full sm:w-96\">\n              <h2 className=\"text-xl font-semibold mb-4\">\n                {produtoEditando ? \"Editar Produto\" : \"Novo Produto\"}\n              </h2>\n              <form onSubmit={handleCadastroProduto} className=\"space-y-4\">\n                <input\n                  type=\"text\"\n                  value={nomeProduto}\n                  onChange={(e) => setNomeProduto(e.target.value)}\n                  placeholder=\"Nome do Produto\"\n                  className=\"w-full px-3 py-2 border rounded-lg\"\n                  required\n                />\n                <input\n                  type=\"number\"\n                  value={precoProduto}\n                  onChange={(e) => setPrecoProduto(parseFloat(e.target.value))}\n                  placeholder=\"Preço\"\n                  className=\"w-full px-3 py-2 border rounded-lg\"\n                  required\n                />\n                <select\n                  value={tipoProduto}\n                  onChange={(e) =>\n                    setTipoProduto(e.target.value as \"espeto\" | \"sobremesa\" | \"acompanhamento\")\n                  }\n                  className=\"w-full px-3 py-2 border rounded-lg\"\n                  required\n                >\n                  <option value=\"espeto\">Espeto</option>\n                  <option value=\"sobremesa\">Sobremesa</option>\n                  <option value=\"acompanhamento\">Acompanhamento</option>\n                </select>\n                <textarea\n                  value={descricaoProduto}\n                  onChange={(e) => setDescricaoProduto(e.target.value)}\n                  placeholder=\"Descrição\"\n                  className=\"w-full px-3 py-2 border rounded-lg\"\n                  rows={3}\n                />\n                <input\n                  type=\"file\"\n                  onChange={handleImageUpload}\n                  className=\"w-full px-3 py-2 border rounded-lg\"\n                />\n                <div className=\"flex flex-col sm:flex-row justify-between gap-4\">\n                  <button\n                    type=\"submit\"\n                    className=\"bg-green-500 text-white px-4 py-2 rounded-lg shadow hover:bg-green-600 w-full sm:w-auto\"\n                  >\n                    Salvar\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={() => setIsModalOpen(false)}\n                    className=\"bg-red-500 text-white px-4 py-2 rounded-lg shadow hover:bg-red-600 w-full sm:w-auto\"\n                  >\n                    Cancelar\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        )}\n\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full bg-gray-50 rounded-lg shadow-md overflow-hidden\">\n            <thead className=\"bg-gray-100\">\n              <tr>\n                <th className=\"text-left px-4 py-2 font-medium\">Nome</th>\n                <th className=\"text-left px-4 py-2 font-medium\">Preço</th>\n                <th className=\"text-left px-4 py-2 font-medium\">Tipo</th>\n                <th className=\"text-left px-4 py-2 font-medium\">Descrição</th>\n                <th className=\"text-left px-4 py-2 font-medium\">Imagem</th>\n                <th className=\"text-left px-4 py-2 font-medium\">Ações</th>\n              </tr>\n            </thead>\n            <tbody>\n              {produtos.map((produto) => (\n                <tr key={produto.id} className=\"hover:bg-gray-100\">\n                  <td className=\"px-4 py-2\">{produto.nomeProduto}</td>\n                  <td className=\"px-4 py-2\">R${produto.preco.toFixed(2)}</td>\n                  <td className=\"px-4 py-2\">{produto.tipo}</td>\n                  <td className=\"px-4 py-2\">{produto.descricao || \"-\"}</td>\n                  <td className=\"px-4 py-2\">\n                    {produto.imagemUrl && (\n                      <Image\n                        src={produto.imagemUrl}\n                        alt={produto.nomeProduto}\n                        className=\"w-16 h-16 rounded\"\n                        width={64}\n                      />\n                    )}\n                  </td>\n                  <td className=\"px-4 py-2 space-x-2\">\n                    <button\n                      onClick={() => handleEditProduto(produto)}\n                      className=\"text-blue-500 hover:underline\"\n                    >\n                      Editar\n                    </button>\n                    <button\n                      onClick={() => handleDeleteProduto(produto.id)}\n                      className=\"text-red-500 hover:underline\"\n                    >\n                      Excluir\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProdutosPage;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 495, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 506, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 506, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}