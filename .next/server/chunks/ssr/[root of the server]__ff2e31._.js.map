{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///Users/matheuschimendes/restaurant-app/app/pages/produto/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Image from \"next/image\";\n\ntype Produto = {\n  id: number;\n  nomeProduto: string;\n  preco: number;\n  tipo: \"espeto\" | \"sobremesa\" | \"acompanhamento\";\n  descricao?: string;\n  imagemUrl?: string;\n};\n\nconst ProdutosPage = () => {\n  const router = useRouter();\n  const [produtos, setProdutos] = useState<Produto[]>([]);\n  const [nomeProduto, setNomeProduto] = useState(\"\");\n  const [precoProduto, setPrecoProduto] = useState(0);\n  const [tipoProduto, setTipoProduto] = useState<\"espeto\" | \"sobremesa\" | \"acompanhamento\">(\"espeto\");\n  const [descricaoProduto, setDescricaoProduto] = useState(\"\");\n  const [imagemProduto, setImagemProduto] = useState<string | null>(null);\n\n  const [produtoEditando, setProdutoEditando] = useState<Produto | null>(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n\n  useEffect(() => {\n    const fetchProdutos = async () => {\n      try {\n        const response = await fetch(\"/api/produto\");\n        if (!response.ok) throw new Error(\"Erro ao carregar produtos\");\n        const data: Produto[] = await response.json();\n        setProdutos(data);\n      } catch (error) {\n        console.error(\"Erro ao buscar produtos:\", error);\n      }\n    };\n    fetchProdutos();\n  }, []);\n\n  const handleImageUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files[0]) {\n      const file = e.target.files[0];\n      const formData = new FormData();\n      formData.append(\"file\", file);\n\n      try {\n        const response = await fetch(\"/api/upload\", {\n          method: \"POST\",\n          body: formData,\n        });\n\n        if (!response.ok) throw new Error(\"Erro no upload da imagem\");\n\n        const data = await response.json();\n        setImagemProduto(data.secure_url); // URL segura da imagem do Cloudinary\n      } catch (error) {\n        console.error(\"Erro no upload:\", error);\n        alert(\"Erro ao enviar imagem.\");\n      }\n    }\n  };\n\n  const handleCadastroProduto = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!nomeProduto || precoProduto <= 0 || isNaN(precoProduto)) {\n      alert(\"Por favor, preencha todos os campos corretamente.\");\n      return;\n    }\n\n    const novoProduto = {\n      nomeProduto,\n      preco: precoProduto,\n      tipo: tipoProduto,\n      descricao: descricaoProduto,\n      imagemUrl: imagemProduto, // URL da imagem\n    };\n\n    try {\n      const response = produtoEditando\n        ? await fetch(`/api/produto/${produtoEditando.id}`, {\n            method: \"PUT\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({ ...novoProduto, id: produtoEditando.id }),\n          })\n        : await fetch(\"/api/produto\", {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify(novoProduto),\n          });\n\n      if (response.ok) {\n        alert(produtoEditando ? \"Produto atualizado com sucesso!\" : \"Produto cadastrado com sucesso!\");\n        const produtoCadastrado = await response.json();\n        setProdutos((prevProdutos) =>\n          produtoEditando\n            ? prevProdutos.map((prod) =>\n                prod.id === produtoEditando.id ? produtoCadastrado : prod\n              )\n            : [...prevProdutos, produtoCadastrado]\n        );\n        resetForm();\n        setIsModalOpen(false);\n      } else {\n        alert(\"Erro ao cadastrar/atualizar produto.\");\n      }\n    } catch (error) {\n      console.error(\"Erro ao cadastrar/atualizar produto:\", error);\n      alert(\"Erro ao cadastrar/atualizar produto.\");\n    }\n  };\n\n  const handleDeleteProduto = async (id: number) => {\n    try {\n      const response = await fetch(`/api/produto/${id}`, {\n        method: \"DELETE\",\n      });\n\n      if (response.ok) {\n        alert(\"Produto excluído com sucesso!\");\n        setProdutos(produtos.filter((produto) => produto.id !== id));\n      } else {\n        alert(\"Erro ao excluir produto.\");\n      }\n    } catch (error) {\n      console.error(\"Erro ao excluir produto:\", error);\n      alert(\"Erro ao excluir produto.\");\n    }\n  };\n\n  const handleEditProduto = (produto: Produto) => {\n    setProdutoEditando(produto);\n    setNomeProduto(produto.nomeProduto);\n    setPrecoProduto(produto.preco);\n    setTipoProduto(produto.tipo);\n    setDescricaoProduto(produto.descricao || \"\");\n    setImagemProduto(produto.imagemUrl || null);\n    setIsModalOpen(true);\n  };\n\n  const resetForm = () => {\n    setProdutoEditando(null);\n    setNomeProduto(\"\");\n    setPrecoProduto(0);\n    setTipoProduto(\"espeto\");\n    setDescricaoProduto(\"\");\n    setImagemProduto(null);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-r from-gray-100 to-gray-200 p-6\">\n      <div className=\"max-w-6xl mx-auto bg-white rounded-lg shadow-lg p-6\">\n        <h1 className=\"text-2xl font-semibold mb-4\">Cadastro de Produtos</h1>\n        <form onSubmit={handleCadastroProduto}>\n          <div className=\"mb-4\">\n            <label className=\"block text-sm font-medium text-gray-700\">Nome do Produto</label>\n            <input\n              type=\"text\"\n              value={nomeProduto}\n              onChange={(e) => setNomeProduto(e.target.value)}\n              className=\"w-full p-2 mt-1 border border-gray-300 rounded-md\"\n              required\n            />\n          </div>\n\n          <div className=\"mb-4\">\n            <label className=\"block text-sm font-medium text-gray-700\">Preço</label>\n            <input\n              type=\"number\"\n              value={precoProduto}\n              onChange={(e) => setPrecoProduto(parseFloat(e.target.value))}\n              className=\"w-full p-2 mt-1 border border-gray-300 rounded-md\"\n              required\n            />\n          </div>\n\n          <div className=\"mb-4\">\n            <label className=\"block text-sm font-medium text-gray-700\">Tipo</label>\n            <select\n              value={tipoProduto}\n              onChange={(e) => setTipoProduto(e.target.value as \"espeto\" | \"sobremesa\" | \"acompanhamento\")}\n              className=\"w-full p-2 mt-1 border border-gray-300 rounded-md\"\n              required\n            >\n              <option value=\"espeto\">Espeto</option>\n              <option value=\"sobremesa\">Sobremesa</option>\n              <option value=\"acompanhamento\">Acompanhamento</option>\n            </select>\n          </div>\n\n          <div className=\"mb-4\">\n            <label className=\"block text-sm font-medium text-gray-700\">Descrição</label>\n            <textarea\n              value={descricaoProduto}\n              onChange={(e) => setDescricaoProduto(e.target.value)}\n              className=\"w-full p-2 mt-1 border border-gray-300 rounded-md\"\n              rows={4}\n            />\n          </div>\n\n          <div className=\"mb-4\">\n            <label className=\"block text-sm font-medium text-gray-700\">Imagem</label>\n            <input type=\"file\" onChange={handleImageUpload} className=\"w-full p-2 mt-1\" />\n            {imagemProduto && (\n              <div className=\"mt-2\">\n                <Image\n                  src={imagemProduto}\n                  alt=\"Imagem do produto\"\n                  width={150}\n                  height={150}\n                  className=\"object-cover rounded-md\"\n                />\n              </div>\n            )}\n          </div>\n\n          <div className=\"mt-4\">\n            <button\n              type=\"submit\"\n              className=\"w-full bg-blue-500 text-white p-2 rounded-md hover:bg-blue-600\"\n            >\n              {produtoEditando ? \"Atualizar Produto\" : \"Cadastrar Produto\"}\n            </button>\n          </div>\n        </form>\n      </div>\n\n      {/* Exibindo a lista de produtos */}\n      <div className=\"max-w-6xl mx-auto mt-8\">\n        <h2 className=\"text-xl font-semibold mb-4\">Lista de Produtos</h2>\n        <div className=\"space-y-4\">\n          {produtos.map((produto) => (\n            <div\n              key={produto.id}\n              className=\"bg-white p-4 rounded-md shadow-sm flex items-center space-x-4\"\n            >\n              {produto.imagemUrl && (\n                <Image\n                  src={produto.imagemUrl}\n                  alt={produto.nomeProduto}\n                  width={50}\n                  height={50}\n                  className=\"object-cover rounded-md\"\n                />\n              )}\n              <div className=\"flex-1\">\n                <h3 className=\"font-medium\">{produto.nomeProduto}</h3>\n                <p className=\"text-gray-600\">{produto.descricao}</p>\n                <p className=\"text-gray-800\">{produto.preco.toFixed(2)} BRL</p>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <button\n                  onClick={() => handleEditProduto(produto)}\n                  className=\"bg-blue-500 text-white px-3 py-1 rounded-md\"\n                >\n                  Editar\n                </button>\n                <button\n                  onClick={() => handleDeleteProduto(produto.id)}\n                  className=\"bg-red-500 text-white px-3 py-1 rounded-md\"\n                >\n                  Excluir\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProdutosPage;\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAeA,MAAM,eAAe;IACnB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAa,EAAE;IACtD,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAA6C;IAC1F,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACzD,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAElE,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAkB;IACvE,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE/C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,gBAAgB;YACpB,IAAI;gBACF,MAAM,WAAW,MAAM,MAAM;gBAC7B,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;gBAClC,MAAM,OAAkB,MAAM,SAAS,IAAI;gBAC3C,YAAY;YACd,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,4BAA4B;YAC5C;QACF;QACA;IACF,GAAG,EAAE;IAEL,MAAM,oBAAoB,OAAO;QAC/B,IAAI,EAAE,MAAM,CAAC,KAAK,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE,EAAE;YACvC,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE;YAC9B,MAAM,WAAW,IAAI;YACrB,SAAS,MAAM,CAAC,QAAQ;YAExB,IAAI;gBACF,MAAM,WAAW,MAAM,MAAM,eAAe;oBAC1C,QAAQ;oBACR,MAAM;gBACR;gBAEA,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;gBAElC,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,iBAAiB,KAAK,UAAU,GAAG,qCAAqC;YAC1E,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,mBAAmB;gBACjC,MAAM;YACR;QACF;IACF;IAEA,MAAM,wBAAwB,OAAO;QACnC,EAAE,cAAc;QAChB,IAAI,CAAC,eAAe,gBAAgB,KAAK,MAAM,eAAe;YAC5D,MAAM;YACN;QACF;QAEA,MAAM,cAAc;YAClB;YACA,OAAO;YACP,MAAM;YACN,WAAW;YACX,WAAW;QACb;QAEA,IAAI;YACF,MAAM,WAAW,kBACb,MAAM,MAAM,CAAC,aAAa,EAAE,gBAAgB,EAAE,EAAE,EAAE;gBAChD,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,GAAG,WAAW;oBAAE,IAAI,gBAAgB,EAAE;gBAAC;YAChE,KACA,MAAM,MAAM,gBAAgB;gBAC1B,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;YACvB;YAEJ,IAAI,SAAS,EAAE,EAAE;gBACf,MAAM,kBAAkB,oCAAoC;gBAC5D,MAAM,oBAAoB,MAAM,SAAS,IAAI;gBAC7C,YAAY,CAAC,eACX,kBACI,aAAa,GAAG,CAAC,CAAC,OAChB,KAAK,EAAE,KAAK,gBAAgB,EAAE,GAAG,oBAAoB,QAEvD;2BAAI;wBAAc;qBAAkB;gBAE1C;gBACA,eAAe;YACjB,OAAO;gBACL,MAAM;YACR;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,wCAAwC;YACtD,MAAM;QACR;IACF;IAEA,MAAM,sBAAsB,OAAO;QACjC,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,CAAC,aAAa,EAAE,IAAI,EAAE;gBACjD,QAAQ;YACV;YAEA,IAAI,SAAS,EAAE,EAAE;gBACf,MAAM;gBACN,YAAY,SAAS,MAAM,CAAC,CAAC,UAAY,QAAQ,EAAE,KAAK;YAC1D,OAAO;gBACL,MAAM;YACR;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,4BAA4B;YAC1C,MAAM;QACR;IACF;IAEA,MAAM,oBAAoB,CAAC;QACzB,mBAAmB;QACnB,eAAe,QAAQ,WAAW;QAClC,gBAAgB,QAAQ,KAAK;QAC7B,eAAe,QAAQ,IAAI;QAC3B,oBAAoB,QAAQ,SAAS,IAAI;QACzC,iBAAiB,QAAQ,SAAS,IAAI;QACtC,eAAe;IACjB;IAEA,MAAM,YAAY;QAChB,mBAAmB;QACnB,eAAe;QACf,gBAAgB;QAChB,eAAe;QACf,oBAAoB;QACpB,iBAAiB;IACnB;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAA8B;;;;;;kCAC5C,8OAAC;wBAAK,UAAU;;0CACd,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAM,WAAU;kDAA0C;;;;;;kDAC3D,8OAAC;wCACC,MAAK;wCACL,OAAO;wCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;wCAC9C,WAAU;wCACV,QAAQ;;;;;;;;;;;;0CAIZ,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAM,WAAU;kDAA0C;;;;;;kDAC3D,8OAAC;wCACC,MAAK;wCACL,OAAO;wCACP,UAAU,CAAC,IAAM,gBAAgB,WAAW,EAAE,MAAM,CAAC,KAAK;wCAC1D,WAAU;wCACV,QAAQ;;;;;;;;;;;;0CAIZ,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAM,WAAU;kDAA0C;;;;;;kDAC3D,8OAAC;wCACC,OAAO;wCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;wCAC9C,WAAU;wCACV,QAAQ;;0DAER,8OAAC;gDAAO,OAAM;0DAAS;;;;;;0DACvB,8OAAC;gDAAO,OAAM;0DAAY;;;;;;0DAC1B,8OAAC;gDAAO,OAAM;0DAAiB;;;;;;;;;;;;;;;;;;0CAInC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAM,WAAU;kDAA0C;;;;;;kDAC3D,8OAAC;wCACC,OAAO;wCACP,UAAU,CAAC,IAAM,oBAAoB,EAAE,MAAM,CAAC,KAAK;wCACnD,WAAU;wCACV,MAAM;;;;;;;;;;;;0CAIV,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAM,WAAU;kDAA0C;;;;;;kDAC3D,8OAAC;wCAAM,MAAK;wCAAO,UAAU;wCAAmB,WAAU;;;;;;oCACzD,+BACC,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC,6HAAA,CAAA,UAAK;4CACJ,KAAK;4CACL,KAAI;4CACJ,OAAO;4CACP,QAAQ;4CACR,WAAU;;;;;;;;;;;;;;;;;0CAMlB,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCACC,MAAK;oCACL,WAAU;8CAET,kBAAkB,sBAAsB;;;;;;;;;;;;;;;;;;;;;;;0BAOjD,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAA6B;;;;;;kCAC3C,8OAAC;wBAAI,WAAU;kCACZ,SAAS,GAAG,CAAC,CAAC,wBACb,8OAAC;gCAEC,WAAU;;oCAET,QAAQ,SAAS,kBAChB,8OAAC,6HAAA,CAAA,UAAK;wCACJ,KAAK,QAAQ,SAAS;wCACtB,KAAK,QAAQ,WAAW;wCACxB,OAAO;wCACP,QAAQ;wCACR,WAAU;;;;;;kDAGd,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAG,WAAU;0DAAe,QAAQ,WAAW;;;;;;0DAChD,8OAAC;gDAAE,WAAU;0DAAiB,QAAQ,SAAS;;;;;;0DAC/C,8OAAC;gDAAE,WAAU;;oDAAiB,QAAQ,KAAK,CAAC,OAAO,CAAC;oDAAG;;;;;;;;;;;;;kDAEzD,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDACC,SAAS,IAAM,kBAAkB;gDACjC,WAAU;0DACX;;;;;;0DAGD,8OAAC;gDACC,SAAS,IAAM,oBAAoB,QAAQ,EAAE;gDAC7C,WAAU;0DACX;;;;;;;;;;;;;+BA3BE,QAAQ,EAAE;;;;;;;;;;;;;;;;;;;;;;AAqC7B;uCAEe"}},
    {"offset": {"line": 513, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}